<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Category Sync Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .category { 
            display: inline-block; 
            margin: 10px; 
            padding: 15px; 
            border: 1px solid #ddd; 
            border-radius: 8px; 
            text-align: center;
            min-width: 150px;
        }
        .icon { font-size: 32px; margin-bottom: 8px; }
        .name { font-weight: bold; margin-bottom: 4px; }
        .color { font-size: 12px; color: #666; }
        .count { font-size: 12px; color: #999; }
        .section { margin: 30px 0; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>Category Sync Test</h1>
    
    <div class="section">
        <h2>Frontend Categories (Expected)</h2>
        <div id="frontend-categories">
            <div class="category">
                <div class="icon">ü•ò</div>
                <div class="name">Kebutuhan Dapur</div>
                <div class="color">#FF6B35</div>
            </div>
            <div class="category">
                <div class="icon">üçº</div>
                <div class="name">Kebutuhan Ibu & Anak</div>
                <div class="color">#FF69B4</div>
            </div>
            <div class="category">
                <div class="icon">üßΩ</div>
                <div class="name">Kebutuhan Rumah</div>
                <div class="color">#4CAF50</div>
            </div>
            <div class="category">
                <div class="icon">üçû</div>
                <div class="name">Makanan</div>
                <div class="color">#FF9800</div>
            </div>
            <div class="category">
                <div class="icon">ü•¨</div>
                <div class="name">Produk Segar & Beku</div>
                <div class="color">#00BCD4</div>
            </div>
            <div class="category">
                <div class="icon">üß¥</div>
                <div class="name">Personal Care</div>
                <div class="color">#9C27B0</div>
            </div>
            <div class="category">
                <div class="icon">üíä</div>
                <div class="name">Kebutuhan Kesehatan</div>
                <div class="color">#F44336</div>
            </div>
            <div class="category">
                <div class="icon">üëï</div>
                <div class="name">Lifestyle</div>
                <div class="color">#607D8B</div>
            </div>
            <div class="category">
                <div class="icon">ü¶¥</div>
                <div class="name">Pet Foods</div>
                <div class="color">#795548</div>
            </div>
            <div class="category">
                <div class="icon">üßÉ</div>
                <div class="name">Minuman & Beverage</div>
                <div class="color">#2196F3</div>
            </div>
        </div>
    </div>
    
    <div class="section">
        <h2>Admin Dashboard Categories (From API)</h2>
        <div id="admin-categories">Loading...</div>
    </div>
    
    <div class="section">
        <h2>Sync Status</h2>
        <div id="sync-status">Checking...</div>
    </div>

    <script>
        async function loadAdminCategories() {
            try {
                const response = await fetch('http://localhost:8191/api/admin/categories');
                const data = await response.json();
                
                if (data.status && data.data && data.data.categories) {
                    const categories = data.data.categories;
                    const container = document.getElementById('admin-categories');
                    
                    container.innerHTML = categories.map(cat => `
                        <div class="category" style="border-color: ${cat.iconColor}">
                            <div class="icon">${cat.icon}</div>
                            <div class="name">${cat.name}</div>
                            <div class="color">${cat.iconColor}</div>
                            <div class="count">${cat.productCount} products</div>
                        </div>
                    `).join('');
                    
                    checkSync(categories);
                } else {
                    document.getElementById('admin-categories').innerHTML = '<div class="error">Failed to load categories</div>';
                }
            } catch (error) {
                document.getElementById('admin-categories').innerHTML = '<div class="error">Error: ' + error.message + '</div>';
            }
        }
        
        function checkSync(adminCategories) {
            const expectedCategories = [
                'Kebutuhan Dapur', 'Kebutuhan Ibu & Anak', 'Kebutuhan Rumah', 'Makanan',
                'Produk Segar & Beku', 'Personal Care', 'Kebutuhan Kesehatan', 'Lifestyle',
                'Pet Foods', 'Minuman & Beverage'
            ];
            
            const adminCategoryNames = adminCategories.map(cat => cat.name);
            const missing = expectedCategories.filter(name => !adminCategoryNames.includes(name));
            const extra = adminCategoryNames.filter(name => !expectedCategories.includes(name));
            
            let status = '';
            if (missing.length === 0 && extra.length === 0) {
                status = '<div class="success">‚úÖ Categories are perfectly synced!</div>';
            } else {
                status = '<div class="error">‚ùå Categories are not synced:</div>';
                if (missing.length > 0) {
                    status += '<div class="error">Missing: ' + missing.join(', ') + '</div>';
                }
                if (extra.length > 0) {
                    status += '<div class="error">Extra: ' + extra.join(', ') + '</div>';
                }
            }
            
            document.getElementById('sync-status').innerHTML = status;
        }
        
        // Load categories when page loads
        loadAdminCategories();
    </script>
</body>
</html>