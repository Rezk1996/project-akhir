<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Employee Creation</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .form-group { margin: 10px 0; }
        input, select { padding: 8px; margin: 5px; width: 200px; }
        button { padding: 10px 20px; margin: 10px; }
        .result { margin: 20px 0; padding: 10px; border: 1px solid #ddd; }
        .success { background-color: #d4edda; }
        .error { background-color: #f8d7da; }
    </style>
</head>
<body>
    <h1>Test Employee Creation</h1>
    
    <form id="employeeForm">
        <div class="form-group">
            <label>Name:</label>
            <input type="text" id="nama" value="John Doe" required>
        </div>
        <div class="form-group">
            <label>Position:</label>
            <input type="text" id="position" value="Manager" required>
        </div>
        <div class="form-group">
            <label>Phone:</label>
            <input type="text" id="phone" value="081234567890">
        </div>
        <div class="form-group">
            <label>Hire Date:</label>
            <input type="date" id="hire_date" value="2025-01-01" required>
        </div>
        <div class="form-group">
            <label>Status:</label>
            <select id="status">
                <option value="active">Active</option>
                <option value="inactive">Inactive</option>
            </select>
        </div>
        <button type="submit">Create Employee</button>
    </form>
    
    <button onclick="loadEmployees()">Load Employees</button>
    
    <div id="result"></div>

    <script>
        document.getElementById('employeeForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const employeeData = {
                nama: document.getElementById('nama').value,
                position: document.getElementById('position').value,
                phone: document.getElementById('phone').value,
                hire_date: document.getElementById('hire_date').value,
                status: document.getElementById('status').value
            };
            
            try {
                const response = await fetch('http://localhost:8191/api/admin/employees', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(employeeData)
                });
                
                const data = await response.json();
                
                if (data.status) {
                    document.getElementById('result').innerHTML = 
                        '<div class="result success">Employee created successfully!</div>';
                    loadEmployees();
                } else {
                    document.getElementById('result').innerHTML = 
                        '<div class="result error">Error: ' + data.message + '</div>';
                }
            } catch (error) {
                document.getElementById('result').innerHTML = 
                    '<div class="result error">Error: ' + error.message + '</div>';
            }
        });
        
        async function loadEmployees() {
            try {
                const response = await fetch('http://localhost:8191/api/admin/employees');
                const data = await response.json();
                
                if (data.status && data.data.employees) {
                    const employees = data.data.employees;
                    const html = '<h2>Employees:</h2>' + 
                        employees.map(emp => 
                            `<div>ID: ${emp.id}, Name: ${emp.nama}, Position: ${emp.position}, Phone: ${emp.phone}</div>`
                        ).join('');
                    document.getElementById('result').innerHTML = html;
                } else {
                    document.getElementById('result').innerHTML = 
                        '<div class="result error">Failed to load employees</div>';
                }
            } catch (error) {
                document.getElementById('result').innerHTML = 
                    '<div class="result error">Error loading employees: ' + error.message + '</div>';
            }
        }
    </script>
</body>
</html>